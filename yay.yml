- name: "yay"
  block:
    - name: "âœ… check if yay exists"
      stat:
        path: /usr/bin/yay
      register: yay_bin

    - name: "ğŸª¢ pulling upstream's repository"
      ansible.builtin.git:
        repo: "https://aur.archlinux.org/yay.git"
        dest: "{{ ansible_upstreams_dir }}/yay"
      become: yes
      become_user: "{{ ansible_user }}"
      when: not yay_bin.stat.exists

    - name: "ğŸ”¨ building an yay"
      shell: 
        chdir: "{{ ansible_upstreams_dir }}/yay"
        cmd: "makepkg -si --noconfirm"
      become: yes
      become_user: "{{ ansible_user }}"
      when: not yay_bin.stat.exists

    - name: "ğŸ”ƒ update & upgrade"
      shell: 
        cmd: "yay -Syu"
      become: yes
      become_user: "{{ ansible_user }}"

